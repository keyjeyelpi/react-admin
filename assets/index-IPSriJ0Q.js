import{J as z,K as S,r as t,M as k,N as b,j as R,e as D,l as F,P as H,T as K,Q as U}from"./index-Cl2VD-JY.js";import{M as W,i as A,a as T,b as G,c as _,d as J,L as Q}from"./proxy-C4WJY15m.js";function V(i={}){const{themeId:a,defaultTheme:e,defaultClassName:n="MuiBox-root",generateClassName:d}=i,s=z("div",{shouldForwardProp:h=>h!=="theme"&&h!=="sx"&&h!=="as"})(S);return t.forwardRef(function(g,o){const C=k(e),{className:r,component:l="div",...u}=b(g);return R.jsx(s,{as:l,ref:o,className:D(r,d?d(n):n),theme:a&&C[a]||C,...u})})}const X=F("MuiBox",["root"]),q=U(),ne=V({themeId:K,defaultTheme:q,defaultClassName:X.root,generateClassName:H.generate});class O extends t.Component{getSnapshotBeforeUpdate(a){const e=this.props.childRef.current;if(e&&a.isPresent&&!this.props.isPresent){const n=e.offsetParent,d=A(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft,s.right=d-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Y({children:i,isPresent:a,anchorX:e,root:n}){const d=t.useId(),s=t.useRef(null),p=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=t.useContext(W);return t.useInsertionEffect(()=>{const{width:g,height:o,top:C,left:r,right:l}=p.current;if(a||!s.current||!g||!o)return;const u=e==="left"?`left: ${r}`:`right: ${l}`;s.current.dataset.motionPopId=d;const f=document.createElement("style");h&&(f.nonce=h);const m=n??document.head;return m.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${o}px !important;
            ${u}px !important;
            top: ${C}px !important;
          }
        `),()=>{m.contains(f)&&m.removeChild(f)}},[a]),R.jsx(O,{isPresent:a,childRef:s,sizeRef:p,children:t.cloneElement(i,{ref:s})})}const Z=({children:i,initial:a,isPresent:e,onExitComplete:n,custom:d,presenceAffectsLayout:s,mode:p,anchorX:h,root:g})=>{const o=T(ee),C=t.useId();let r=!0,l=t.useMemo(()=>(r=!1,{id:C,initial:a,isPresent:e,custom:d,onExitComplete:u=>{o.set(u,!0);for(const f of o.values())if(!f)return;n&&n()},register:u=>(o.set(u,!1),()=>o.delete(u))}),[e,o,n]);return s&&r&&(l={...l}),t.useMemo(()=>{o.forEach((u,f)=>o.set(f,!1))},[e]),t.useEffect(()=>{!e&&!o.size&&n&&n()},[e]),p==="popLayout"&&(i=R.jsx(Y,{isPresent:e,anchorX:h,root:g,children:i})),R.jsx(G.Provider,{value:l,children:i})};function ee(){return new Map}const M=i=>i.key||"";function j(i){const a=[];return t.Children.forEach(i,e=>{t.isValidElement(e)&&a.push(e)}),a}const oe=({children:i,custom:a,initial:e=!0,onExitComplete:n,presenceAffectsLayout:d=!0,mode:s="sync",propagate:p=!1,anchorX:h="left",root:g})=>{const[o,C]=_(p),r=t.useMemo(()=>j(i),[i]),l=p&&!o?[]:r.map(M),u=t.useRef(!0),f=t.useRef(r),m=T(()=>new Map),[I,N]=t.useState(r),[y,v]=t.useState(r);J(()=>{u.current=!1,f.current=r;for(let x=0;x<y.length;x++){const c=M(y[x]);l.includes(c)?m.delete(c):m.get(c)!==!0&&m.set(c,!1)}},[y,l.length,l.join("-")]);const P=[];if(r!==I){let x=[...r];for(let c=0;c<y.length;c++){const E=y[c],w=M(E);l.includes(w)||(x.splice(c,0,E),P.push(E))}return s==="wait"&&P.length&&(x=P),v(j(x)),N(r),null}const{forceRender:$}=t.useContext(Q);return R.jsx(R.Fragment,{children:y.map(x=>{const c=M(x),E=p&&!o?!1:r===y||l.includes(c),w=()=>{if(m.has(c))m.set(c,!0);else return;let B=!0;m.forEach(L=>{L||(B=!1)}),B&&($?.(),v(f.current),p&&C?.(),n&&n())};return R.jsx(Z,{isPresent:E,initial:!u.current||e?void 0:!1,custom:a,presenceAffectsLayout:d,mode:s,root:g,onExitComplete:E?void 0:w,anchorX:h,children:x},c)})})};export{oe as A,ne as B};
