import{r as h,x as M,j as n,F as g}from"./index-hr_v6iYA.js";import{o as D,p as k,q as E,r as R,s as S,t as T}from"./index-DIl7FPgf.js";import{r as F,m as I,A as $,B as y}from"./proxy-DwobwV4H.js";import{S as f,T as v}from"./Stack-Co737D8o.js";import{C as B}from"./Chip-CMTNmeLo.js";import{C as V}from"./Card-SvnEOJ19.js";import{T as P}from"./title.component-CTC_VmJT.js";import"./ButtonBase-DWwLo07g.js";import"./useSlot-A6P10r7t.js";const W={some:0,all:1};function z(e,t,{root:o,margin:s,amount:r="some"}={}){const a=F(e),i=new WeakMap,l=d=>{d.forEach(m=>{const c=i.get(m.target);if(m.isIntersecting!==!!c)if(m.isIntersecting){const p=t(m.target,m);typeof p=="function"?i.set(m.target,p):u.unobserve(m.target)}else typeof c=="function"&&(c(m),i.delete(m.target))})},u=new IntersectionObserver(l,{root:o,rootMargin:s,threshold:typeof r=="number"?r:W[r]});return a.forEach(d=>u.observe(d)),()=>u.disconnect()}function U(e,{root:t,margin:o,amount:s,once:r=!1,initial:a=!1}={}){const[i,l]=h.useState(a);return h.useEffect(()=>{if(!e.current||r&&i)return;const u=()=>(l(!0),r?void 0:()=>l(!1)),d={root:t&&t.current||void 0,margin:o,amount:s};return z(e.current,u,d)},[t,e,o,r,s]),i}const A=({text:e,delay:t=0,spacing:o=.2,...s})=>{const r=h.useRef(null),a=U(r,{once:!0}),{breakpoint:i}=M();return n.jsx(f,{direction:"row",spacing:o,justifyContent:"center",ref:r,component:I.div,transition:{delay:t},children:n.jsx($,{children:(typeof e=="string"?e:typeof e=="object"?(i==="xl"?e.xl||e.lg||e.md||e.sm||e.xs:i==="lg"?e.lg||e.md||e.sm||e.xs:i==="md"?e.md||e.sm||e.xs:i==="sm"&&e.sm||e.xs)??"":"").split("").map((l,u)=>n.jsx(v,{component:I.p,...s,initial:{opacity:0},animate:a?{opacity:1}:{},transition:{duration:.2,delay:u*.1},children:l===" "?"Â ":l},u))})})},b=({auto:e,icon:t,title:o,value:s,previousValue:r})=>{const a=r&&typeof r=="number"&&typeof s=="number"?Math.round((s-r)/r*100):0;return n.jsx(f,{sx:[!!e&&{height:"100%",width:"100%"}],justifyContent:"center",children:n.jsxs(f,{gap:3,sx:{p:2},children:[n.jsxs(f,{flexDirection:"row",alignItems:"center",gap:2,children:[n.jsx(f,{alignItems:"center",justifyContent:"center",sx:{height:32,width:32,bgcolor:"background.50",borderRadius:2,border:i=>`solid 1px ${i.palette.divider}`},children:h.cloneElement(t,{size:14})}),n.jsx(v,{variant:"h6",children:o})]}),n.jsxs(f,{flexDirection:"row",alignItems:"center",gap:2,children:[n.jsx(A,{text:s?.toLocaleString(),variant:"h3",fontWeight:600,delay:10}),r&&n.jsx(B,{variant:"filled",size:"small",sx:{backgroundColor:a>0?"success.100":a<0?"error.100":"background.50"},label:n.jsx(f,{flexDirection:"row",alignItems:"center",children:typeof r=="number"&&typeof s=="number"?n.jsxs(f,{flexDirection:"row",alignItems:"center",gap:.5,sx:{color:a>0?"success.main":a<0?"error.main":"text.primary"},children:[n.jsxs(v,{component:"span",variant:"caption",fontWeight:600,children:[Math.abs(a),"%"]}),a>0?n.jsx(D,{}):n.jsx(k,{})]}):n.jsx(v,{variant:"caption",children:r})})})]})]})})};function H(e){const t=h.useRef(null);return h.useEffect(()=>{t.current&&e({row:t.current.offsetHeight,column:t.current.offsetWidth,top:t.current.offsetTop,left:t.current.offsetLeft})}),t}const L=({row:e=4,column:t=4,gap:o=2,children:s,customGridTemplateColumns:r,customGridTemplateRows:a,flex:i})=>n.jsx(y,{flex:i,sx:{height:i?void 0:"100%",width:i?void 0:"100%",gridTemplateColumns:`repeat(${t}, ${r||"1fr"})`,gridTemplateRows:`repeat(${e}, ${a||"1fr"})`,gap:o},display:"grid",children:s}),N=({i:e,card:t,updatePosition:o,updateOrder:s,padding:r,turnDragOff:a,cardSx:i,onClick:l,outlined:u,backgroundColor:d})=>{const[m,c]=h.useState(!1),p=H(x=>o(e,x));return n.jsx(V,{component:I.div,ref:p,layout:!0,initial:!1,sx:{position:"relative",zIndex:m?3:1,backgroundColor:d||"background.default",p:r||0,display:"flex",flexDirection:"column",overflow:"hidden",border:u?x=>`1px solid ${x.palette.divider}`:"none",...i},onClick:l,animate:{gridColumn:`span ${t.column}`,gridRow:`span ${t.row}`},elevation:0,drag:!a,dragSnapToOrigin:!0,onDragStart:()=>c(!0),onDragEnd:()=>c(!1),onUpdate:({x,y:C})=>{m&&s(e,Number(x),Number(C))},whileHover:{zIndex:100},children:n.jsx(f,{sx:{height:"100%",width:"100%"},justifyContent:"center",children:t.content})})};function q(e,t,o){const s=t<0?e.length+t:t;if(s>=0&&s<e.length){const r=o<0?e.length+o:o,[a]=e.splice(t,1);e.splice(r,0,a)}}function G(e,t,o){return e=[...e],q(e,t,o),e}function J(e,t,o){return Math.min(Math.max(o,e),t)}function j(e,t){return Math.abs(e-t)}function K(e){const[t,o]=h.useState(e),s=h.useRef([]).current,r=(i,l)=>{s[i]=l},a=(i,l,u)=>{const d=Q(i,l,u,s);d!==i&&o(G(t,i,d))};return h.useEffect(()=>{o(i=>e.length===i.length?i.map(l=>{const u=e.find(d=>d.id===l.id);return u?{...l,content:u.content}:l}):e)},[e]),[t,r,a]}const w=0,Q=(e,t,o,s)=>{let r=e;const{top:a,column:i,row:l,left:u}=s[e],d=a+l,m=u+i;if(o<0&&Math.abs(o)>Math.abs(t)){const c=s[e-3];if(!c)return e;const p=c.top+c.row,x=j(a,p-c.row/2)+w;o<-x&&(r=e-3)}else if(o>0&&Math.abs(o)>Math.abs(t)){const c=s[e+3];if(!c)return e;const p=j(d,c.top+c.row/2)+w;o>p&&(r=e+3)}else if(t<0&&Math.abs(t)>Math.abs(o)){const c=s[e-1];if(!c)return e;const p=c.left+c.column,x=j(u,p-c.column/2)+w;t<-x&&(r=e-1)}else if(t>0&&Math.abs(t)>Math.abs(o)){const c=s[e+1];if(!c)return e;const p=j(m,c.left+c.column/2)+w;t>p&&(r=e+1)}return J(0,s.length,r)},X=[{id:g(),content:n.jsx(b,{icon:n.jsx(E,{}),title:"Tickets",value:31,previousValue:38,auto:!0}),column:4,row:5},{id:g(),content:n.jsx(b,{icon:n.jsx(R,{}),title:"Sign Ups",value:24,previousValue:18,auto:!0}),column:4,row:5},{id:g(),content:n.jsx(b,{icon:n.jsx(S,{}),title:"Open Issues",value:16,previousValue:19,auto:!0}),column:4,row:5},{id:g(),content:n.jsx(b,{icon:n.jsx(T,{}),title:"Views",value:31032,previousValue:30217,auto:!0}),column:4,row:5},{id:g(),content:n.jsx(b,{icon:n.jsx(T,{}),title:"Views",value:3103,previousValue:3021,auto:!0}),column:4,row:5},{id:g(),content:n.jsx(n.Fragment,{}),column:5,row:10},{id:g(),content:n.jsx(n.Fragment,{}),column:5,row:10},{id:g(),content:n.jsx(n.Fragment,{}),column:6,row:10},{id:g(),content:n.jsx(n.Fragment,{}),column:4,row:4},{id:g(),content:n.jsx(n.Fragment,{}),column:4,row:4},{id:g(),content:n.jsx(n.Fragment,{}),column:4,row:12},{id:g(),content:n.jsx(n.Fragment,{}),column:16,row:10}],se=()=>{const[e,t,o]=K(X);return n.jsxs(f,{gap:2,flex:1,sx:{height:"100%"},children:[n.jsx(P,{subtitle:"Overview & analytics"}),n.jsx(L,{row:25,column:20,flex:1,children:e.map((s,r)=>n.jsx(N,{i:r,card:s,outlined:!0,backgroundColor:"background.paper",updatePosition:t,updateOrder:o},s.id))})]})};export{se as default};
